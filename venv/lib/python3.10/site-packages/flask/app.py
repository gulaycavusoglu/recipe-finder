import requests

# Replace 'YOUR_API_KEY' with your actual API key from Spoonacular
API_KEY = '9385b0c9dc8c43e9b29415cea966a7c1'

def find_recipes_by_ingredients(ingredients, number=10):
    url = f'https://api.spoonacular.com/recipes/findByIngredients'
    params = {
        'ingredients': ingredients,
        'number': number,
        'limitLicense': True,
        'ranking': 1,
        'ignorePantry': True,
        'apiKey': API_KEY
    }

    try:
        response = requests.get(url, params=params)
        response.raise_for_status()
        recipes = response.json()
        return recipes
    except requests.exceptions.RequestException as e:
        print(f"Error: {e}")
        return None

# Example usage
ingredients = 'apples,flour,sugar'
recipes = find_recipes_by_ingredients(ingredients)

if recipes:
    for recipe in recipes:
        print("Recipe:")
        print(f"Title: {recipe['title']}")
        print(f"Image: {recipe['image']}")
        print("Ingredients:")
        for ingredient in recipe['usedIngredients']:
            print(f"- {ingredient['original']}")
        print("Instructions:")
        # You can retrieve detailed instructions for each recipe using another Spoonacular API endpoint
        print("To view instructions, visit: " + recipe['sourceUrl'])
        print()
